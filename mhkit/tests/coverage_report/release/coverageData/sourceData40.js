var sourceData40 = {"FileName":"/Users/asimms/Desktop/Programming/mhkit_matlab_simms_dev/MHKiT-MATLAB-2/mhkit/loads/extreme/mler_wave_amp_normalize.m","RawFileContents":["function mler_norm = mler_wave_amp_normalize(wave_amp, mler, sim, k)","","%%%%%%%%%%%%%%%%%%%%%%%%%%%%","%","%     Function that renormalizes the incoming amplitude of the MLER wave","%     to the desired peak height (peak to MSL).","%","%     Parameters","%     ----------","%     wave_amp: float","%         Desired wave amplitude (peak to MSL).","%     mler: struct","%         MLER coefficients generated by 'mler_coefficients' function.","%     sim: struct","%         Simulation parameters formatted by output from","%         'mler_simulation'.","%     k: array","%         Wave number.","%","%     Returns","%     -------","%     mler_norm : struct","%         Normalized MLER coefficients","%","%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%","","% assert statements","if ~isa(wave_amp,'numeric')","    error('ERROR: wave_amp must be a float')","end","if ~isa(mler,'struct')","    error('ERROR: mler must be a struct')","end","if ~isa(sim,'struct')","    error('ERROR: sim must be a struct')","end","if ~isa(k,'numeric')","    error('ERROR: k must be an array')","end","","","freq = mler.frequency .* (2*pi);","dw = (max(freq) - min(freq)) / (length(freq)-1);","","wave_amp_time = zeros(sim.maxIX, sim.maxIT);","for x=1:length(sim.X)","    for t=1:length(sim.T)","        wave_amp_time(x,t) = sum(sqrt(mler.conditioned_spectrum'.*2*dw) .* ...","            cos(freq'.*(sim.T(t)-sim.T0) - k.*(sim.X(x)-sim.X0) + mler.phase'));","    end","end","","tmp_max_amp = max(max(abs(wave_amp_time)));","","% renormalization of wave amplitudes","rescale_fact = abs(wave_amp) ./ abs(tmp_max_amp);","% rescale the wave spectral amplitude coefficients","spectrum = mler.conditioned_spectrum .* rescale_fact.^2;","","% create outputs","mler_norm.conditioned_spectrum = spectrum;","mler_norm.phase = mler.phase;","mler_norm.frequency = mler.frequency;","","end","",""],"CoverageDisplayDataPerLine":{"Function":{"LineNumber":1,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":68,"ContinuedLine":false},"Statement":[{"LineNumber":28,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":27,"ContinuedLine":false},{"LineNumber":29,"Hits":0,"StartColumnNumbers":4,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":31,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":22,"ContinuedLine":false},{"LineNumber":32,"Hits":0,"StartColumnNumbers":4,"EndColumnNumbers":41,"ContinuedLine":false},{"LineNumber":34,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":35,"Hits":0,"StartColumnNumbers":4,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":37,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":20,"ContinuedLine":false},{"LineNumber":38,"Hits":0,"StartColumnNumbers":4,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":42,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":32,"ContinuedLine":false},{"LineNumber":43,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":45,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":46,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":47,"Hits":601,"StartColumnNumbers":4,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":48,"Hits":180901,"StartColumnNumbers":8,"EndColumnNumbers":73,"ContinuedLine":false},{"LineNumber":49,"Hits":180901,"StartColumnNumbers":12,"EndColumnNumbers":80,"ContinuedLine":true},{"LineNumber":53,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":56,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":58,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":56,"ContinuedLine":false},{"LineNumber":61,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":42,"ContinuedLine":false},{"LineNumber":62,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":63,"Hits":1,"StartColumnNumbers":0,"EndColumnNumbers":37,"ContinuedLine":false}]}}