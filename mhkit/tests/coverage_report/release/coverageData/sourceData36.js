var sourceData36 = {"FileName":"/Users/asimms/Desktop/Programming/mhkit_matlab_simms_dev/MHKiT-MATLAB/mhkit/dolfyn/tools/set_coords.m","RawFileContents":["function out = set_coords(ds, ref_frame)","%     Checks the current reference frame and adjusts xarray coords/dims","%     as necessary. Makes sure assigned dataarray coordinates match what","%     DOLfYN is reading in.","    make = join([ds.attrs.inst_make,\" \", ds.attrs.inst_model]);","    XYZ = {'X', 'Y', 'Z'};","    ENU = {'E', 'N', 'U'};","    beam = 1:min(size(squeeze(ds.vel.data)));","    principal = {'streamwise', 'x-stream', 'vert'};","","    if contains(lower(make), 'rdi')","        inst  = {'X', 'Y', 'Z', 'err'};","        earth = {'E', 'N', 'U', 'err'};","        princ = {'streamwise', 'x-stream', 'vert', 'err'};","","    elseif contains(lower(make), 'nortek')","        if contains(lower(make), 'signature') || ...","                contains(lower(make), 'ad2cp')","            inst  = {'X', 'Y', 'Z1', 'Z2'};","            earth = {'E', 'N', 'U1', 'U2'};","            princ = {'streamwise', 'x-stream', 'vert1', 'vert2'};","        else","            % AWAC or Vector","            inst = XYZ;","            earth = ENU;","            princ = principal;","        end","    end","","    %  update 'orient' and 'orientIMU' dimensions","    if strcmpi(ref_frame, 'beam')","        ds.coords.dir = beam;","    elseif strcmpi(ref_frame, 'inst')","        ds.coords.dir = inst;","    elseif strcmpi(ref_frame, 'ship')","        ds.coords.dir = inst;","    elseif strcmpi(ref_frame, 'earth')","        ds.coords.dir = earth;","    elseif strcmpi(ref_frame, 'principal')","        ds.coords.dir = princ;","    end","","    if isfield(ds.coords, 'dirIMU')","        if strcmpi(ref_frame, 'earth')","            ds.coords.dirIMU = ENU;","        elseif strcmpi(ref_frame, 'principal')","            ds.coords.dirIMU = principal;","        else","            ds.coords.dirIMU = XYZ;","        end","    end","    ds.attrs.coord_sys = ref_frame;","    ds.coord_sys = ref_frame;","","    % In xarray this is adequate. When you change ds.coords.dir it","    % propogates that change to each field that has dir as a coordinate.","    % Here, however, we must manaully propogate that change","    fn = fieldnames(ds);","    for qq = 1:numel(fn)","        field = fn{qq};","        if isfield(ds.(field),'coords')","            % This is a data field","            if isfield(ds.(field).coords, 'dir')","                % replace dir","                ds.(field).coords.dir = ds.coords.dir;","            end","            if isfield(ds.(field).coords, 'dirIMU')","                % replace dirIMU","                ds.(field).coords.dirIMU = ds.coords.dirIMU;","            end","        end","    end","","    tag = {'', '_echo', '_bt'};","    for qq = 1:3","        if isfield(ds.attrs, join([\"coord_sys_axes\",tag{qq}],''))","            ds.attrs = rmfield(ds.attrs,...","                join([\"coord_sys_axes\",tag{qq}],''));","        end","    end","","    out = ds;","end","",""],"CoverageDisplayDataPerLine":{"Function":{"LineNumber":1,"Hits":70,"StartColumnNumbers":0,"EndColumnNumbers":40,"ContinuedLine":false},"Statement":[{"LineNumber":5,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":63,"ContinuedLine":false},{"LineNumber":6,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":7,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":8,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":9,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":11,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":12,"Hits":16,"StartColumnNumbers":8,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":13,"Hits":16,"StartColumnNumbers":8,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":14,"Hits":16,"StartColumnNumbers":8,"EndColumnNumbers":58,"ContinuedLine":false},{"LineNumber":16,"Hits":54,"StartColumnNumbers":4,"EndColumnNumbers":42,"ContinuedLine":false},{"LineNumber":17,"Hits":54,"StartColumnNumbers":8,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":18,"Hits":54,"StartColumnNumbers":16,"EndColumnNumbers":46,"ContinuedLine":true},{"LineNumber":19,"Hits":23,"StartColumnNumbers":12,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":20,"Hits":23,"StartColumnNumbers":12,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":21,"Hits":23,"StartColumnNumbers":12,"EndColumnNumbers":65,"ContinuedLine":false},{"LineNumber":24,"Hits":31,"StartColumnNumbers":12,"EndColumnNumbers":23,"ContinuedLine":false},{"LineNumber":25,"Hits":31,"StartColumnNumbers":12,"EndColumnNumbers":24,"ContinuedLine":false},{"LineNumber":26,"Hits":31,"StartColumnNumbers":12,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":31,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":33,"ContinuedLine":false},{"LineNumber":32,"Hits":16,"StartColumnNumbers":8,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":33,"Hits":54,"StartColumnNumbers":4,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":34,"Hits":24,"StartColumnNumbers":8,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":35,"Hits":30,"StartColumnNumbers":4,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":36,"Hits":2,"StartColumnNumbers":8,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":37,"Hits":28,"StartColumnNumbers":4,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":38,"Hits":22,"StartColumnNumbers":8,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":39,"Hits":6,"StartColumnNumbers":4,"EndColumnNumbers":42,"ContinuedLine":false},{"LineNumber":40,"Hits":6,"StartColumnNumbers":8,"EndColumnNumbers":30,"ContinuedLine":false},{"LineNumber":43,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":44,"Hits":23,"StartColumnNumbers":8,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":45,"Hits":6,"StartColumnNumbers":12,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":46,"Hits":17,"StartColumnNumbers":8,"EndColumnNumbers":46,"ContinuedLine":false},{"LineNumber":47,"Hits":1,"StartColumnNumbers":12,"EndColumnNumbers":41,"ContinuedLine":false},{"LineNumber":49,"Hits":16,"StartColumnNumbers":12,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":52,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":53,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":58,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":24,"ContinuedLine":false},{"LineNumber":59,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":24,"ContinuedLine":false},{"LineNumber":60,"Hits":2087,"StartColumnNumbers":8,"EndColumnNumbers":23,"ContinuedLine":false},{"LineNumber":61,"Hits":2087,"StartColumnNumbers":8,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":63,"Hits":1807,"StartColumnNumbers":12,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":65,"Hits":164,"StartColumnNumbers":16,"EndColumnNumbers":54,"ContinuedLine":false},{"LineNumber":67,"Hits":1807,"StartColumnNumbers":12,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":69,"Hits":134,"StartColumnNumbers":16,"EndColumnNumbers":60,"ContinuedLine":false},{"LineNumber":74,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":75,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":16,"ContinuedLine":false},{"LineNumber":76,"Hits":210,"StartColumnNumbers":8,"EndColumnNumbers":65,"ContinuedLine":false},{"LineNumber":77,"Hits":12,"StartColumnNumbers":12,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":78,"Hits":12,"StartColumnNumbers":16,"EndColumnNumbers":53,"ContinuedLine":true},{"LineNumber":82,"Hits":70,"StartColumnNumbers":4,"EndColumnNumbers":13,"ContinuedLine":false}]}}