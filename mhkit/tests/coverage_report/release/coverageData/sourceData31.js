var sourceData31 = {"FileName":"/Users/asimms/Desktop/Programming/mhkit_matlab_simms_dev/MHKiT-MATLAB/mhkit/dolfyn/tools/create_dataset.m","RawFileContents":["function ds = create_dataset(data)","    % Creates final dataset from structure created from binary readers.","    % It is meant to try and approximate an xarray dataset","    % Direction 'dir' coordinates get reset in `set_coords`","    ds = struct;","    inst = {'X' 'Y' 'Z'};","    earth = {'E' 'N' 'U'};","    beam = 1:min(size(squeeze(data.data_vars.vel)));","    tag = {'_b5', '_echo', '_bt', '_gps', '_ast'};","    ds.coords.inst = inst;","    ds.coords.earth = earth;","","    fn = fieldnames(data.data_vars);","    for k=1:numel(fn)","        tmp = split(fn{k},\"_\");","        chk_tag = strcat(\"_\",tmp(end));","        if any(strcmp(tag,chk_tag))","            tg = chk_tag;","        else","            tg = '';","        end","        if (contains(fn{k},'mat'))","            % beam2inst & inst2head orientation matrices","            if (contains(fn{k},'inst'))","                ds.(fn{k}).data = data.data_vars.(fn{k});","                ds.(fn{k}).dims = {'x_star', 'x'};","                ds.(fn{k}).coords.x_star = beam;","                ds.(fn{k}).coords.x = beam;","            else","            % earth2inst orientation matrix","                ds.(fn{k}).data = data.data_vars.(fn{k});","                ds.(fn{k}).dims = {strcat('time',tg), 'inst', 'earth'};","                ds.(fn{k}).coords.(strcat('time',tg)) = ...","                    data.coords.(strcat('time',tg));","                ds.(fn{k}).coords.inst = inst;","                ds.(fn{k}).coords.earth = earth;","            end","","        % quaternion units never change","        elseif (contains(fn{k},'quaternion'))","","            ds.(fn{k}).data = data.data_vars.(fn{k});","            ds.(fn{k}).dims = {strcat('time',tg), 'q'};","            ds.(fn{k}).coords.(strcat('time',tg))= ...","                    data.coords.(strcat('time',tg));","            ds.(fn{k}).coords.q = {'w', 'x', 'y', 'z'};","        else","            ds.(fn{k}).data = data.data_vars.(fn{k});","            if isfield(data.units,fn{k})","                ds.(fn{k}).units = data.units.(fn{k});","            else","                % make sure ones with tags get units","                if ~isempty(tg)","                    ds.(fn{k}).units =...","                        data.units.(strjoin([tmp(1:end-1)],'_'));","                end","            end","","            shp = size(data.data_vars.(fn{k}));","            vshp = size(data.data_vars.vel);","            l = length(shp);","","            if l == 2 % 1D variables","                if any(strcmp(tag,chk_tag))","                    tg = chk_tag;","                else","                    tg = '';","                end","                % I'm not sure what this part does. Need to come back","                % to it if its used for the other data types","                ds.(fn{k}).dims = {strcat(\"time\",tg)};","                ds.(fn{k}).coords.(strcat('time',tg)) = ...","                    data.coords.(strcat('time',tg));","","            elseif l == 3 % 2D variables","                sub_tag = tag(1:2);","                if strcmp('echo',fn{k})","                    ds.(fn{k}).dims = {'time_echo', 'range_echo'};","                    ds.(fn{k}).coords.time_echo = ...","                        data.coords.time_echo;","                    ds.(fn{k}).coords.range_echo = ...","                        data.coords.range_echo;","","                % 3- & 4-beam instrument vector data, bottom tracking","                elseif shp(end)==vshp(end) && ~any(strcmp(sub_tag,chk_tag))","                    % b/c rdi time","                    if (contains(fn{k},'bt')) && ...","                        isfield(data.coords,'time_bt')","                        tg = '_bt';","                    else","                        tg = '';","                    end","                    ds.(fn{k}).dims = {strcat(\"time\",tg), 'dir'};","                    ds.(fn{k}).coords.(strcat(\"time\",tg)) = ...","                        data.coords.(strcat('time',tg));","                    ds.(fn{k}).coords.dir = beam;","                % 4-beam instrument IMU data","                elseif shp(end) == vshp(end)-1","                    ds.(fn{k}).dims = {strcat(\"time\",tg), 'dirIMU'};","                    ds.(fn{k}).coords.(strcat(\"time\",tg)) = ...","                        data.coords.(strcat('time',tg));","                    ds.(fn{k}).coords.dirIMU = 1:3;","","                elseif any(strcmp(sub_tag,chk_tag))","                    ds.(fn{k}).dims = {strcat(\"time\",tg),...","                        strcat(\"range\",tg)};","                    ds.(fn{k}).coords.(strcat(\"time\",tg)) = ...","                        data.coords.(strcat('time',tg));","                    ds.(fn{k}).coords.(strcat(\"range\",tg)) = ...","                        data.coords.(strcat('range',tg));","                else","                    warning(strcat('Variable not included in dataset: ',...","                        fn{k}));","                end","","            elseif l == 4","               if ~contains(fn{k},join(tag))","                   if (contains(fn{k},'vel'))","                       dim0 = 'dir';","                   else","                       dim0 = 'beam';","                   end","                   ds.(fn{k}).dims = {'time','range', dim0};","                   ds.(fn{k}).coords.time = data.coords.time;","                   ds.(fn{k}).coords.range = data.coords.range;","                   ds.(fn{k}).coords.(dim0) = beam;","","               elseif (contains(fn{k},'b5'))","                   ds.(fn{k}).dims = {'time_b5', 'range_b5' };","                   ds.(fn{k}).coords.time_b5 = data.coords.time_b5;","                   ds.(fn{k}).coords.range_b5 = data.coords.range_b5;","               else","                   warning(strcat('Variable not included in dataset: ',...","                        fn{k}));","               end","            end","        end","        add_to_coords(fn{k});","    end","","    % coordinate units","    ds.coord_sys = data.attrs.coord_sys;","","    ds.attrs = data.attrs;","    ds.time = data.coords.time;","    if isfield(ds,'range')","        ds.range = data.coords.range;","    end","","    function add_to_coords(key)","        fields = fieldnames(ds.(key).coords);","        for qq = 1:numel(fields)","            if ~isfield(ds.coords, fields{qq})","                ds.coords.(fields{qq}) = ds.(key).coords.(fields{qq});","            end","        end","    end","","end","","% <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>","",""],"CoverageDisplayDataPerLine":{"Function":[{"LineNumber":1,"Hits":22,"StartColumnNumbers":0,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":150,"Hits":607,"StartColumnNumbers":4,"EndColumnNumbers":31,"ContinuedLine":false}],"Statement":[{"LineNumber":5,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":16,"ContinuedLine":false},{"LineNumber":6,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":7,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":8,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":52,"ContinuedLine":false},{"LineNumber":9,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":10,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":11,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":28,"ContinuedLine":false},{"LineNumber":13,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":36,"ContinuedLine":false},{"LineNumber":14,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":15,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":16,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":17,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":18,"Hits":177,"StartColumnNumbers":12,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":20,"Hits":430,"StartColumnNumbers":12,"EndColumnNumbers":20,"ContinuedLine":false},{"LineNumber":22,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":34,"ContinuedLine":false},{"LineNumber":24,"Hits":30,"StartColumnNumbers":12,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":25,"Hits":16,"StartColumnNumbers":16,"EndColumnNumbers":57,"ContinuedLine":false},{"LineNumber":26,"Hits":16,"StartColumnNumbers":16,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":27,"Hits":16,"StartColumnNumbers":16,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":28,"Hits":16,"StartColumnNumbers":16,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":31,"Hits":14,"StartColumnNumbers":16,"EndColumnNumbers":57,"ContinuedLine":false},{"LineNumber":32,"Hits":14,"StartColumnNumbers":16,"EndColumnNumbers":71,"ContinuedLine":false},{"LineNumber":33,"Hits":14,"StartColumnNumbers":16,"EndColumnNumbers":55,"ContinuedLine":false},{"LineNumber":34,"Hits":14,"StartColumnNumbers":20,"EndColumnNumbers":52,"ContinuedLine":true},{"LineNumber":35,"Hits":14,"StartColumnNumbers":16,"EndColumnNumbers":46,"ContinuedLine":false},{"LineNumber":36,"Hits":14,"StartColumnNumbers":16,"EndColumnNumbers":48,"ContinuedLine":false},{"LineNumber":40,"Hits":577,"StartColumnNumbers":8,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":42,"Hits":12,"StartColumnNumbers":12,"EndColumnNumbers":53,"ContinuedLine":false},{"LineNumber":43,"Hits":12,"StartColumnNumbers":12,"EndColumnNumbers":55,"ContinuedLine":false},{"LineNumber":44,"Hits":12,"StartColumnNumbers":12,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":45,"Hits":12,"StartColumnNumbers":20,"EndColumnNumbers":52,"ContinuedLine":true},{"LineNumber":46,"Hits":12,"StartColumnNumbers":12,"EndColumnNumbers":55,"ContinuedLine":false},{"LineNumber":48,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":53,"ContinuedLine":false},{"LineNumber":49,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":50,"Hits":399,"StartColumnNumbers":16,"EndColumnNumbers":54,"ContinuedLine":false},{"LineNumber":53,"Hits":166,"StartColumnNumbers":16,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":54,"Hits":126,"StartColumnNumbers":20,"EndColumnNumbers":38,"ContinuedLine":false},{"LineNumber":55,"Hits":126,"StartColumnNumbers":24,"EndColumnNumbers":65,"ContinuedLine":true},{"LineNumber":59,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":60,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":61,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":28,"ContinuedLine":false},{"LineNumber":63,"Hits":565,"StartColumnNumbers":12,"EndColumnNumbers":21,"ContinuedLine":false},{"LineNumber":64,"Hits":390,"StartColumnNumbers":16,"EndColumnNumbers":43,"ContinuedLine":false},{"LineNumber":65,"Hits":85,"StartColumnNumbers":20,"EndColumnNumbers":33,"ContinuedLine":false},{"LineNumber":67,"Hits":305,"StartColumnNumbers":20,"EndColumnNumbers":28,"ContinuedLine":false},{"LineNumber":71,"Hits":390,"StartColumnNumbers":16,"EndColumnNumbers":54,"ContinuedLine":false},{"LineNumber":72,"Hits":390,"StartColumnNumbers":16,"EndColumnNumbers":55,"ContinuedLine":false},{"LineNumber":73,"Hits":390,"StartColumnNumbers":20,"EndColumnNumbers":52,"ContinuedLine":true},{"LineNumber":75,"Hits":175,"StartColumnNumbers":12,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":76,"Hits":119,"StartColumnNumbers":16,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":77,"Hits":119,"StartColumnNumbers":16,"EndColumnNumbers":39,"ContinuedLine":false},{"LineNumber":78,"Hits":2,"StartColumnNumbers":20,"EndColumnNumbers":66,"ContinuedLine":false},{"LineNumber":79,"Hits":2,"StartColumnNumbers":20,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":80,"Hits":2,"StartColumnNumbers":24,"EndColumnNumbers":46,"ContinuedLine":true},{"LineNumber":81,"Hits":2,"StartColumnNumbers":20,"EndColumnNumbers":50,"ContinuedLine":false},{"LineNumber":82,"Hits":2,"StartColumnNumbers":24,"EndColumnNumbers":47,"ContinuedLine":true},{"LineNumber":85,"Hits":117,"StartColumnNumbers":16,"EndColumnNumbers":75,"ContinuedLine":false},{"LineNumber":87,"Hits":36,"StartColumnNumbers":20,"EndColumnNumbers":47,"ContinuedLine":false},{"LineNumber":88,"Hits":36,"StartColumnNumbers":24,"EndColumnNumbers":54,"ContinuedLine":true},{"LineNumber":89,"Hits":3,"StartColumnNumbers":24,"EndColumnNumbers":35,"ContinuedLine":false},{"LineNumber":91,"Hits":33,"StartColumnNumbers":24,"EndColumnNumbers":32,"ContinuedLine":false},{"LineNumber":93,"Hits":36,"StartColumnNumbers":20,"EndColumnNumbers":65,"ContinuedLine":false},{"LineNumber":94,"Hits":36,"StartColumnNumbers":20,"EndColumnNumbers":59,"ContinuedLine":false},{"LineNumber":95,"Hits":36,"StartColumnNumbers":24,"EndColumnNumbers":56,"ContinuedLine":true},{"LineNumber":96,"Hits":36,"StartColumnNumbers":20,"EndColumnNumbers":49,"ContinuedLine":false},{"LineNumber":98,"Hits":81,"StartColumnNumbers":16,"EndColumnNumbers":46,"ContinuedLine":false},{"LineNumber":99,"Hits":54,"StartColumnNumbers":20,"EndColumnNumbers":68,"ContinuedLine":false},{"LineNumber":100,"Hits":54,"StartColumnNumbers":20,"EndColumnNumbers":59,"ContinuedLine":false},{"LineNumber":101,"Hits":54,"StartColumnNumbers":24,"EndColumnNumbers":56,"ContinuedLine":true},{"LineNumber":102,"Hits":54,"StartColumnNumbers":20,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":104,"Hits":27,"StartColumnNumbers":16,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":105,"Hits":27,"StartColumnNumbers":20,"EndColumnNumbers":56,"ContinuedLine":false},{"LineNumber":106,"Hits":27,"StartColumnNumbers":24,"EndColumnNumbers":44,"ContinuedLine":true},{"LineNumber":107,"Hits":27,"StartColumnNumbers":20,"EndColumnNumbers":59,"ContinuedLine":false},{"LineNumber":108,"Hits":27,"StartColumnNumbers":24,"EndColumnNumbers":56,"ContinuedLine":true},{"LineNumber":109,"Hits":27,"StartColumnNumbers":20,"EndColumnNumbers":60,"ContinuedLine":false},{"LineNumber":110,"Hits":27,"StartColumnNumbers":24,"EndColumnNumbers":57,"ContinuedLine":true},{"LineNumber":112,"Hits":0,"StartColumnNumbers":20,"EndColumnNumbers":71,"ContinuedLine":false},{"LineNumber":113,"Hits":0,"StartColumnNumbers":24,"EndColumnNumbers":32,"ContinuedLine":true},{"LineNumber":116,"Hits":56,"StartColumnNumbers":12,"EndColumnNumbers":25,"ContinuedLine":false},{"LineNumber":117,"Hits":56,"StartColumnNumbers":15,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":118,"Hits":56,"StartColumnNumbers":19,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":119,"Hits":18,"StartColumnNumbers":23,"EndColumnNumbers":36,"ContinuedLine":false},{"LineNumber":121,"Hits":38,"StartColumnNumbers":23,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":123,"Hits":56,"StartColumnNumbers":19,"EndColumnNumbers":60,"ContinuedLine":false},{"LineNumber":124,"Hits":56,"StartColumnNumbers":19,"EndColumnNumbers":61,"ContinuedLine":false},{"LineNumber":125,"Hits":56,"StartColumnNumbers":19,"EndColumnNumbers":63,"ContinuedLine":false},{"LineNumber":126,"Hits":56,"StartColumnNumbers":19,"EndColumnNumbers":51,"ContinuedLine":false},{"LineNumber":128,"Hits":0,"StartColumnNumbers":15,"EndColumnNumbers":44,"ContinuedLine":false},{"LineNumber":129,"Hits":0,"StartColumnNumbers":19,"EndColumnNumbers":62,"ContinuedLine":false},{"LineNumber":130,"Hits":0,"StartColumnNumbers":19,"EndColumnNumbers":67,"ContinuedLine":false},{"LineNumber":131,"Hits":0,"StartColumnNumbers":19,"EndColumnNumbers":69,"ContinuedLine":false},{"LineNumber":133,"Hits":0,"StartColumnNumbers":19,"EndColumnNumbers":70,"ContinuedLine":false},{"LineNumber":134,"Hits":0,"StartColumnNumbers":24,"EndColumnNumbers":32,"ContinuedLine":true},{"LineNumber":138,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":29,"ContinuedLine":false},{"LineNumber":142,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":40,"ContinuedLine":false},{"LineNumber":144,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":145,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":31,"ContinuedLine":false},{"LineNumber":146,"Hits":22,"StartColumnNumbers":4,"EndColumnNumbers":26,"ContinuedLine":false},{"LineNumber":147,"Hits":0,"StartColumnNumbers":8,"EndColumnNumbers":37,"ContinuedLine":false},{"LineNumber":151,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":45,"ContinuedLine":false},{"LineNumber":152,"Hits":607,"StartColumnNumbers":8,"EndColumnNumbers":32,"ContinuedLine":false},{"LineNumber":153,"Hits":894,"StartColumnNumbers":12,"EndColumnNumbers":46,"ContinuedLine":false},{"LineNumber":154,"Hits":152,"StartColumnNumbers":16,"EndColumnNumbers":70,"ContinuedLine":false}]}}